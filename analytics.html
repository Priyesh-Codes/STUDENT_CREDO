<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analytics - ADMIN Credo</title>
    <link rel="stylesheet" href="admin-dashboard.css" />
    <link rel="stylesheet" href="analytics.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Admin Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <!-- Mode Toggle -->
          <div class="mode-toggle-container">
            <div class="mode-toggle">
              <input type="radio" id="studentMode" name="userMode" value="student">
              <label for="studentMode" class="mode-option">Student</label>
              <input type="radio" id="adminMode" name="userMode" value="admin" checked>
              <label for="adminMode" class="mode-option">Admin</label>
              <div class="mode-slider"></div>
            </div>
          </div>
          
          <div class="logo">
            <div class="logo-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="logo-text">
              <span class="logo-title">ADMIN Credo</span>
              <span class="logo-subtitle">Management Hub</span>
            </div>
          </div>
        </div>

        <nav class="sidebar-nav">
          <a href="admin-dashboard.html" class="nav-item">
            <div class="nav-icon">
              <i class="fas fa-chart-line"></i>
            </div>
            <span class="nav-text">Dashboard</span>
          </a>
          <a href="accreditation-status.html" class="nav-item">
            <div class="nav-icon">
              <i class="fas fa-certificate"></i>
            </div>
            <span class="nav-text">Accreditation Status</span>
          </a>
          <a href="admin-approvals.html" class="nav-item">
            <div class="nav-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <span class="nav-text">Approvals</span>
            <span class="nav-badge" id="approvalsBadge" style="display: none;"></span>
          </a>
          <a href="student-management.html" class="nav-item">
            <div class="nav-icon">
              <i class="fas fa-users"></i>
            </div>
            <span class="nav-text">Student Management</span>
          </a>
          <a href="analytics.html" class="nav-item active">
            <div class="nav-icon">
              <i class="fas fa-chart-bar"></i>
            </div>
            <span class="nav-text">Analytics</span>
          </a>
          <a href="#" class="nav-item">
            <div class="nav-icon">
              <i class="fas fa-cog"></i>
            </div>
            <span class="nav-text">Settings</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <div class="user-profile">
            <div class="user-avatar">
              <img src="admin-pic.jpeg" alt="Admin Profile" />
            </div>
            <div class="user-info">
              <h4>Dr. Umasankar Pandey</h4>
              <p>CSE Administrator</p>
            </div>
            <button class="settings-btn">
              <i class="fas fa-cog"></i>
            </button>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Analytics Header -->
        <header class="page-header">
          <div class="header-left">
            <div class="header-icon">
              <i class="fas fa-chart-bar"></i>
            </div>
            <div class="header-text">
              <h1>Analytics Dashboard</h1>
              <p>Comprehensive insights and performance metrics</p>
            </div>
          </div>
          <div class="header-right">
            <div class="date-range-selector">
              <select id="dateRange" class="date-select">
                <option value="7">Last 7 days</option>
                <option value="30" selected>Last 30 days</option>
                <option value="90">Last 90 days</option>
                <option value="365">Last year</option>
              </select>
            </div>
            <button class="export-report-btn">
              <i class="fas fa-download"></i>
              Export Report
            </button>
          </div>
        </header>

        <!-- Key Metrics Section -->
        <section class="metrics-section">
          <div class="metrics-grid">
            <div class="metric-card primary">
              <div class="metric-header">
                <div class="metric-icon">
                  <i class="fas fa-users"></i>
                </div>
                <div class="metric-trend up">
                  <i class="fas fa-arrow-up"></i>
                  <span>12%</span>
                </div>
              </div>
              <div class="metric-content">
                <h3>Total Students</h3>
                <div class="metric-value">156</div>
                <p class="metric-description">Active registered students</p>
              </div>
            </div>
            
            <div class="metric-card success">
              <div class="metric-header">
                <div class="metric-icon">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="metric-trend up">
                  <i class="fas fa-arrow-up"></i>
                  <span>25%</span>
                </div>
              </div>
              <div class="metric-content">
                <h3>Total Achievements</h3>
                <div class="metric-value">1,247</div>
                <p class="metric-description">Verified achievements</p>
              </div>
            </div>
            
            <div class="metric-card warning">
              <div class="metric-header">
                <div class="metric-icon">
                  <i class="fas fa-star"></i>
                </div>
                <div class="metric-trend up">
                  <i class="fas fa-arrow-up"></i>
                  <span>18%</span>
                </div>
              </div>
              <div class="metric-content">
                <h3>Activity Points</h3>
                <div class="metric-value">28,450</div>
                <p class="metric-description">Total points earned</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
          <div class="charts-grid">
            <!-- Achievement Trends Chart -->
            <div class="chart-card">
              <div class="chart-header">
                <h3>
                  <i class="fas fa-line-chart"></i>
                  Achievement Trends
                </h3>
                <div class="chart-controls">
                  <button class="chart-btn active" data-period="monthly">Monthly</button>
                  <button class="chart-btn" data-period="weekly">Weekly</button>
                </div>
              </div>
              <div class="chart-container">
                <canvas id="achievementTrendsChart"></canvas>
              </div>
            </div>

            <!-- Department Distribution Chart -->
            <div class="chart-card">
              <div class="chart-header">
                <h3>
                  <i class="fas fa-pie-chart"></i>
                  Department Distribution
                </h3>
              </div>
              <div class="chart-container">
                <canvas id="departmentChart"></canvas>
              </div>
            </div>
          </div>

          <div class="charts-grid">
            <!-- Activity Points Distribution -->
            <div class="chart-card">
              <div class="chart-header">
                <h3>
                  <i class="fas fa-bar-chart"></i>
                  Activity Points by Year
                </h3>
              </div>
              <div class="chart-container">
                <canvas id="activityPointsChart"></canvas>
              </div>
            </div>

            <!-- Top Performers -->
            <div class="chart-card">
              <div class="chart-header">
                <h3>
                  <i class="fas fa-medal"></i>
                  Top Performers
                </h3>
                <button class="view-all-btn">View All</button>
              </div>
              <div class="performers-list">
                <div class="performer-item">
                  <div class="performer-rank">1</div>
                  <div class="performer-info">
                    <div class="performer-avatar">VG</div>
                    <div class="performer-details">
                      <h4>Vikram Gupta</h4>
                      <p>BT22EE067 • EE</p>
                    </div>
                  </div>
                  <div class="performer-points">450 APs</div>
                </div>
                
                <div class="performer-item">
                  <div class="performer-rank">2</div>
                  <div class="performer-info">
                    <div class="performer-avatar">AP</div>
                    <div class="performer-details">
                      <h4>Arjun Patel</h4>
                      <p>BT23CS089 • CSE</p>
                    </div>
                  </div>
                  <div class="performer-points">350 APs</div>
                </div>
                
                <div class="performer-item">
                  <div class="performer-rank">3</div>
                  <div class="performer-info">
                    <div class="performer-avatar">KR</div>
                    <div class="performer-details">
                      <h4>Karthik Raj</h4>
                      <p>BT23ECE078 • ECE</p>
                    </div>
                  </div>
                  <div class="performer-points">225 APs</div>
                </div>
                
                <div class="performer-item">
                  <div class="performer-rank">4</div>
                  <div class="performer-info">
                    <div class="performer-avatar">RS</div>
                    <div class="performer-details">
                      <h4>Rahul Sharma</h4>
                      <p>BT24CS045 • CSE</p>
                    </div>
                  </div>
                  <div class="performer-points">200 APs</div>
                </div>
                
                <div class="performer-item">
                  <div class="performer-rank">5</div>
                  <div class="performer-info">
                    <div class="performer-avatar">SR</div>
                    <div class="performer-details">
                      <h4>Sneha Reddy</h4>
                      <p>BT23ME034 • ME</p>
                    </div>
                  </div>
                  <div class="performer-points">150 APs</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Detailed Analytics Section -->
        <section class="detailed-analytics">
          <div class="analytics-grid">
            <!-- Achievement Categories -->
            <div class="analytics-card">
              <div class="card-header">
                <h3>
                  <i class="fas fa-tags"></i>
                  Achievement Categories
                </h3>
              </div>
              <div class="card-content">
                <div class="category-list">
                  <div class="category-item">
                    <div class="category-info">
                      <div class="category-icon academic">
                        <i class="fas fa-graduation-cap"></i>
                      </div>
                      <div class="category-details">
                        <h4>Academic Excellence</h4>
                        <p>Certifications, courses, grades</p>
                      </div>
                    </div>
                    <div class="category-stats">
                      <span class="category-count">456</span>
                      <div class="category-bar">
                        <div class="category-fill" style="width: 85%"></div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="category-item">
                    <div class="category-info">
                      <div class="category-icon technical">
                        <i class="fas fa-code"></i>
                      </div>
                      <div class="category-details">
                        <h4>Technical Skills</h4>
                        <p>Programming, hackathons, projects</p>
                      </div>
                    </div>
                    <div class="category-stats">
                      <span class="category-count">312</span>
                      <div class="category-bar">
                        <div class="category-fill" style="width: 65%"></div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="category-item">
                    <div class="category-info">
                      <div class="category-icon leadership">
                        <i class="fas fa-users"></i>
                      </div>
                      <div class="category-details">
                        <h4>Leadership</h4>
                        <p>Team lead, organizing events</p>
                      </div>
                    </div>
                    <div class="category-stats">
                      <span class="category-count">189</span>
                      <div class="category-bar">
                        <div class="category-fill" style="width: 40%"></div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="category-item">
                    <div class="category-info">
                      <div class="category-icon sports">
                        <i class="fas fa-trophy"></i>
                      </div>
                      <div class="category-details">
                        <h4>Sports & Recreation</h4>
                        <p>Competitions, tournaments</p>
                      </div>
                    </div>
                    <div class="category-stats">
                      <span class="category-count">290</span>
                      <div class="category-bar">
                        <div class="category-fill" style="width: 55%"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Recent Activity -->
            <div class="analytics-card">
              <div class="card-header">
                <h3>
                  <i class="fas fa-activity"></i>
                  System Activity
                </h3>
              </div>
              <div class="card-content">
                <div class="activity-timeline">
                  <div class="timeline-item">
                    <div class="timeline-marker approved"></div>
                    <div class="timeline-content">
                      <h4>Batch Approval Completed</h4>
                      <p>15 achievements approved for CSE students</p>
                      <span class="timeline-time">2 hours ago</span>
                    </div>
                  </div>
                  
                  <div class="timeline-item">
                    <div class="timeline-marker info"></div>
                    <div class="timeline-content">
                      <h4>New Student Registration</h4>
                      <p>5 new students added to the system</p>
                      <span class="timeline-time">4 hours ago</span>
                    </div>
                  </div>
                  
                  <div class="timeline-item">
                    <div class="timeline-marker warning"></div>
                    <div class="timeline-content">
                      <h4>System Maintenance</h4>
                      <p>Database optimization completed</p>
                      <span class="timeline-time">6 hours ago</span>
                    </div>
                  </div>
                  
                  <div class="timeline-item">
                    <div class="timeline-marker approved"></div>
                    <div class="timeline-content">
                      <h4>Report Generated</h4>
                      <p>Monthly analytics report exported</p>
                      <span class="timeline-time">1 day ago</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="shared-utils.js"></script>
    <script src="analytics.js"></script>
    <script>
        // Initialize mode toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            initializeModeToggle();
            updateApprovalsBadge();
            initializeNavigation();
        });

        function initializeModeToggle() {
            const studentMode = document.getElementById('studentMode');
            const adminMode = document.getElementById('adminMode');
            
            // Admin mode is checked by default
            adminMode.checked = true;
            localStorage.setItem('userMode', 'admin');
            
            // Add event listeners
            studentMode.addEventListener('change', function() {
                if (this.checked) {
                    localStorage.setItem('userMode', 'student');
                    window.location.href = 'index.html';
                }
            });
        }

        function updateApprovalsBadge() {
            // Get pending approvals count from shared data manager
            if (window.studentCredoData) {
                const approvalStats = window.studentCredoData.getApprovalStats();
                const badge = document.getElementById('approvalsBadge');
                if (badge) {
                    badge.textContent = approvalStats.pending;
                    // Hide badge if count is 0
                    badge.style.display = approvalStats.pending > 0 ? 'inline' : 'none';
                }
            }
        }

        function initializeNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    // Only prevent default for placeholder links (no notifications)
                    const href = this.getAttribute('href');
                    if (href === '#' || !href) {
                        e.preventDefault();
                        
                        // Remove active class from all items
                        navItems.forEach(nav => nav.classList.remove('active'));
                        
                        // Add active class to clicked item
                        this.classList.add('active');
                    }
                    // For actual links (admin-dashboard.html, student-management.html, etc.), 
                    // allow normal navigation without any interference
                });
            });
        }

        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
                color: white;
                padding: 16px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                z-index: 10000;
                max-width: 300px;
                font-size: 14px;
                font-weight: 500;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
  </body>
</html>
